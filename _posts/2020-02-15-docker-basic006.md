---
title: "Docker - 06.Dockerfile"
date: 2020-02-14 00:00:00 +0800
categories: docker
sidebar:
  title: "Development"
  nav: "dev-sidebar"
---

1. Dockerfile 작성

- whms-1.0.jar 를 포함하고 자동 기동하는 Dockerfile 만들기

- Dockerfile 스크립트

```sh 

FROM centos:7
RUN yum update -y
RUN yum install java -y
RUN ["/bin/bash","-c","mkdir -p /sorc001/sftth318/applications"]
RUN ["/bin/bash","-c","mkdir /engn001"]
RUN ["/bin/bash","-c","mkdir -p /logs001/sftth318/springboot"]

ADD ./target/whms-1.0.jar /sorc001/sftth318/applications/
ADD ./restart.sh /engn001/

WORKDIR /engn001
RUN ["/bin/bash","-c","chmod 755 restart.sh"]
CMD java -jar -Dspring.profiles.active=dev /sorc001/sftth318/applications/whms-1.0.jar -DFOREGROUND

```

- 설명

| 항목 | 설명 |
| --- | --- |
| FROM | 사용자 정의 이미지에 활용되는 기본 이미지 정의 |
| RUN | 이미지 생성 과정에서 컨테이너 내부에서 수행되는 명령어 |
| ADD | Host 파일 중 컨테이너 특정 디렉토리로 이동 |
| WORKDIR | 지정한 디렉토리로 이동 |
| CMD | 컨테이너 기동시 실행 명령어 |

2. Dockerfile 빌드
- Dockerfile 빌드하여 이미지 생성

```sh 
docker build -t whms-test:1.0 ./
```

<script id="asciicast-oVd3LUaJL9lh2LD1b0SQPSfGd" src="https://asciinema.org/a/oVd3LUaJL9lh2LD1b0SQPSfGd.js" async></script>






